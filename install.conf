# =====================================================
# CODEHERO - Installation Configuration
# Version: 2.6.0
# =====================================================
# Edit this file BEFORE running setup.sh to customize
# your installation. All settings have sensible defaults.
#
# After installation, you can change passwords with:
#   sudo /opt/codehero/scripts/change-passwords.sh
# =====================================================

# =====================================================
# SYSTEM USER
# =====================================================
# The user that will run Claude Code and own all files
CLAUDE_USER="claude"

# =====================================================
# DATABASE (MySQL)
# =====================================================
DB_HOST="localhost"
DB_NAME="claude_knowledge"
DB_USER="claude_user"
DB_PASSWORD="claudepass123"
MYSQL_ROOT_PASSWORD="rootpass123"

# =====================================================
# ADMIN PANEL (Flask Web UI)
# =====================================================
ADMIN_USER="admin"
ADMIN_PASSWORD="admin123"
# Internal Flask port (proxied via Nginx)
FLASK_HOST="127.0.0.1"
FLASK_PORT="5000"

# =====================================================
# PORTS (External - HTTPS via Nginx)
# =====================================================
# Admin Panel
ADMIN_PORT="9453"
# Web Projects (PHP)
PROJECTS_PORT="9867"

# =====================================================
# DIRECTORIES
# =====================================================
# Where the admin app gets installed
INSTALL_DIR="/opt/codehero"
# Config files location
CONFIG_DIR="/etc/codehero"
# Log files
LOG_DIR="/var/log/codehero"
# PHP/HTML web projects
WEB_ROOT="/var/www/projects"
# Java/Python/Node app projects
APP_ROOT="/opt/apps"

# =====================================================
# DAEMON SETTINGS
# =====================================================
# How many tickets to process in parallel
MAX_PARALLEL_PROJECTS="10"
# Days before auto-approve pending_review tickets
REVIEW_DEADLINE_DAYS="7"

# =====================================================
# SSL CERTIFICATES
# =====================================================
# Self-signed cert will be generated during install
# For production, replace with Let's Encrypt:
#   certbot certonly --standalone -d yourdomain.com
SSL_CERT="${CONFIG_DIR}/ssl/cert.pem"
SSL_KEY="${CONFIG_DIR}/ssl/key.pem"

# =====================================================
# CLAUDE CODE
# =====================================================
# Claude Code CLI is installed automatically during setup.sh
# After installation, activate it from the Admin Panel

# =====================================================
# NOTIFICATIONS (Telegram)
# =====================================================
# Get instant alerts on your phone when Claude needs attention.
#
# To enable Telegram notifications:
# 1. Create a bot with @BotFather on Telegram
# 2. Get the token (looks like: 7123456789:AAHxxxxx)
# 3. Start chat with your bot and send /start, then send one more message
# 4. Get your chat_id from: https://api.telegram.org/bot<TOKEN>/getUpdates
#    (look for "chat":{"id":123456789})
#
# Leave empty to disable (can also configure from Settings panel in dashboard)
TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID=""

# What to notify about (yes/no)
NOTIFY_TICKET_COMPLETED="yes"
NOTIFY_AWAITING_INPUT="yes"
NOTIFY_TICKET_FAILED="yes"
NOTIFY_WATCHDOG_ALERT="yes"

# =====================================================
# AUTO-REVIEW (Relaxed Mode)
# =====================================================
# Uses Claude Haiku (via Claude CLI) to automatically review
# completed tickets and decide if they should be auto-closed.
# No extra API key needed - uses the same auth as Claude Code.
#
# Delay before auto-review (gives user time to respond)
AUTO_REVIEW_DELAY_MINUTES="5"

# =====================================================
# AUTO-START ON BOOT
# =====================================================
# Services that will start automatically after reboot:
# - codehero-web (Flask admin panel)
# - codehero-daemon (Claude workers)
# - nginx (Web server)
# - php8.3-fpm (PHP processor)
# - mysql (Database)
ENABLE_AUTOSTART="yes"

# =====================================================
# SUMMARY OF URLS (after installation)
# =====================================================
# Admin Panel:     https://YOUR_IP:${ADMIN_PORT}
# Web Projects:    https://YOUR_IP:${PROJECTS_PORT}
# =====================================================
